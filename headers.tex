%Headers and Sections

% Custom QED symbol
\renewcommand\qedsymbol{$\blacksquare$}



% Problem Number for assignments
\newcounter{theproblem}

\newcommand{\problem}[1]{%
    \phantomsection\subsection*{Theorem #1}%
    \markright{Theorem #1}%
    \addcontentsline{toc}{section}{Theorem #1}%
    \setcounter{secnumdepth}{1}%
    \stepcounter{theproblem}
}

\newcommand{\fexercisesHeader}[1]{%
    \phantomsection\section*{Exercises}%
    \markright{Exercises}%
    \addcontentsline{toc}{section}{Exercises}%
    \setcounter{theproblem}{0}%
    \setcounter{secnumdepth}{1}%
}

\newcommand{\exercise}[1]{%
    \phantomsection\subsection*{Exercise #1}%
    \markright{Exercise #1}%
    \addcontentsline{toc}{subsection}{Exercise #1}%
    \setcounter{secnumdepth}{0}%
    \stepcounter{theproblem}
}

\newcommand{\topheader}[1]{%
    \phantomsection\subsection*{#1}%
    \markright{#1}%
    \addcontentsline{toc}{section}{#1}%
    \setcounter{secnumdepth}{1}%
    \stepcounter{theproblem}
}


\newtheoremstyle{subtheorem}    % name
    {1.5\topsep}        % space above
    {1.5\topsep}        % space below
    {\itshape}          % name of font to use in the body of the theorem
    {1em}               % measure of space to indent
    {\bfseries}         % name of head font
    { }                 % punctuation between head and body
    { }                 % space after theorem head; " " = normal interword space
    {}

% WTS, now numbered
\newtheorem{wts}{Proposition}[theproblem]

\theoremstyle{subtheorem}                       % Lemma, Corollary follows Theorem 4.16.X



\newtheorem{lemma}{Lemma}[theproblem]               % Lemma, follows 'Problem' counter
\newtheorem{corollary}{Corollary}[theproblem]       % Corollary
\newtheorem{remark}{Remark}[theproblem]             % Unnumbered remark
\newtheorem{definition}{Definition}[theproblem]         % Definition

\theoremstyle{subtheorem}
%What to remember
\newtheorem*{wtr}{What to Remember}

% Two custom enumerate environments.
% The labels for these are (a), (iv) respectively.


% enumalpha environment for 
% a), b), c)
\newenvironment{enumalpha}%
    {\begin{enumerate}[label=(\alph*)]}%
    {\end{enumerate}}

% enumroman environment for
% i), ii), iii)
\newenvironment{enumroman}%
    {\begin{enumerate}[label=(\roman*)]}%
    {\end{enumerate}}


%for putting chapter numbers after the title
\titleformat{\section}[hang]%
{ %
\normalfont\Large\bfseries%
} %
{}{0em}{}{}

\newcommand{\fchapter}[1]%
{%
    \phantomsection\chapter*{Chapter #1}%
    \setcounter{theproblem}{0}%
    \addcontentsline{toc}{chapter}{Chapter #1}\newpage% Chapter Number
} 
\newenvironment{outline}%
    {\addtocounter{theproblem}{-1}\begin{proofoutline}}%
    {\end{proofoutline}}

\theoremstyle{definition}
\newtheorem{proofoutline}%
[theproblem]{Outline of Problem}




% Here we manage Clever Headers
\crefname{lemma}{lemma}{lemmas}
\Crefname{lemma}{Lemma}{Lemmas}

\crefname{corollary}{corollary}{corollaries}
\Crefname{corollary}{Corollary}{Corollaries}

\crefname{problem}{theorem}{theorems}
\Crefname{problem}{Theorem}{Theorems}

\crefname{exercise}{exercise}{exercises}
\Crefname{exercise}{Exercise}{Exercises}

\crefname{definition}{definition}{definitions}
\Crefname{definition}{Definition}{Definitions}

\crefname{wts}{proposition}{propositions}
\Crefname{wts}{Proposition}{Propositions}